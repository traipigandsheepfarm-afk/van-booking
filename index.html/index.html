<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏≠‡∏á‡∏ó‡∏µ‡πà‡∏ô‡∏±‡πà‡∏á‡∏£‡∏ñ‡∏ï‡∏π‡πâ‡πÇ‡∏î‡∏¢‡∏™‡∏≤‡∏£ - Firebase</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { font-family: 'Sarabun', 'Prompt', sans-serif; }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-50 to-purple-50">
    <div id="app"></div>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>

    <!-- React -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.5/babel.min.js"></script>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // ‚öôÔ∏è Firebase Configuration - ‚ö†Ô∏è ‡πÉ‡∏™‡πà Config ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà
        const firebaseConfig = {
            apiKey: "YOUR_API_KEY",
            authDomain: "YOUR_PROJECT_ID.firebaseapp.com",
            databaseURL: "https://YOUR_PROJECT_ID.firebaseio.com",
            projectId: "YOUR_PROJECT_ID",
            storageBucket: "YOUR_PROJECT_ID.appspot.com",
            messagingSenderId: "YOUR_MESSAGING_SENDER_ID",
            appId: "YOUR_APP_ID"
        };

        // ‡πÄ‡∏ä‡πá‡∏Ñ‡∏ß‡πà‡∏≤‡∏°‡∏µ‡∏Å‡∏≤‡∏£ config Firebase ‡∏´‡∏£‡∏∑‡∏≠‡∏¢‡∏±‡∏á
        const isFirebaseConfigured = firebaseConfig.apiKey !== "YOUR_API_KEY";

        // Initialize Firebase
        if (!firebase.apps.length && isFirebaseConfigured) {
            firebase.initializeApp(firebaseConfig);
        }

        const database = isFirebaseConfigured ? firebase.database() : null;

        // SVG Icons
        const CalendarIcon = () => (
            <svg className="w-5 h-5 inline" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/>
                <line x1="16" y1="2" x2="16" y2="6"/>
                <line x1="8" y1="2" x2="8" y2="6"/>
                <line x1="3" y1="10" x2="21" y2="10"/>
            </svg>
        );

        const UserIcon = () => (
            <svg className="w-4 h-4 inline" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/>
            </svg>
        );

        const PhoneIcon = () => (
            <svg className="w-4 h-4 inline" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"/>
            </svg>
        );

        const MapPinIcon = () => (
            <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"/>
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"/>
            </svg>
        );

        const ClockIcon = () => (
            <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <circle cx="12" cy="12" r="10"/>
                <polyline points="12 6 12 12 16 14"/>
            </svg>
        );

        const CheckIcon = () => (
            <svg className="w-12 h-12 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <polyline points="20 6 9 17 4 12"/>
            </svg>
        );

        const XIcon = () => (
            <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <line x1="18" y1="6" x2="6" y2="18"/>
                <line x1="6" y1="6" x2="18" y2="18"/>
            </svg>
        );

        const ChartIcon = () => (
            <svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"/>
            </svg>
        );

        const SettingsIcon = () => (
            <svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"/>
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>
            </svg>
        );

        // Component: ‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏ï‡πâ‡∏≠‡∏á Config Firebase
        const FirebaseSetupNotice = () => (
            <div className="min-h-screen flex items-center justify-center p-4">
                <div className="bg-white rounded-2xl shadow-2xl p-8 max-w-3xl">
                    <div className="text-center mb-6">
                        <div className="w-20 h-20 bg-yellow-500 rounded-full flex items-center justify-center mx-auto mb-4">
                            <SettingsIcon />
                        </div>
                        <h1 className="text-3xl font-bold text-gray-800 mb-2">
                            üîß ‡∏ï‡πâ‡∏≠‡∏á‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á Firebase ‡∏Å‡πà‡∏≠‡∏ô‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô
                        </h1>
                        <p className="text-gray-600">‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ó‡∏≥‡∏ï‡∏≤‡∏°‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏£‡∏∞‡∏ö‡∏ö</p>
                    </div>

                    <div className="bg-blue-50 rounded-xl p-6 mb-6">
                        <h2 className="text-xl font-bold text-blue-900 mb-4">üìã ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á:</h2>
                        
                        <div className="space-y-4 text-left">
                            <div className="bg-white rounded-lg p-4">
                                <h3 className="font-bold text-gray-800 mb-2">1Ô∏è‚É£ ‡∏™‡∏£‡πâ‡∏≤‡∏á Firebase Project</h3>
                                <p className="text-sm text-gray-600 mb-2">‚Ä¢ ‡πÄ‡∏Ç‡πâ‡∏≤ <a href="https://console.firebase.google.com" target="_blank" className="text-blue-600 underline">console.firebase.google.com</a></p>
                                <p className="text-sm text-gray-600 mb-2">‚Ä¢ ‡∏Ñ‡∏•‡∏¥‡∏Å "Add project" ‡∏´‡∏£‡∏∑‡∏≠ "‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå"</p>
                                <p className="text-sm text-gray-600">‚Ä¢ ‡∏ï‡∏±‡πâ‡∏á‡∏ä‡∏∑‡πà‡∏≠‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå ‡πÄ‡∏ä‡πà‡∏ô "van-booking"</p>
                            </div>

                            <div className="bg-white rounded-lg p-4">
                                <h3 className="font-bold text-gray-800 mb-2">2Ô∏è‚É£ ‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô Realtime Database</h3>
                                <p className="text-sm text-gray-600 mb-2">‚Ä¢ ‡πÑ‡∏õ‡∏ó‡∏µ‡πà Build ‚Üí Realtime Database</p>
                                <p className="text-sm text-gray-600 mb-2">‚Ä¢ ‡∏Ñ‡∏•‡∏¥‡∏Å "Create Database"</p>
                                <p className="text-sm text-gray-600">‚Ä¢ ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å "Start in test mode" (‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ó‡∏î‡∏™‡∏≠‡∏ö)</p>
                            </div>

                            <div className="bg-white rounded-lg p-4">
                                <h3 className="font-bold text-gray-800 mb-2">3Ô∏è‚É£ ‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å Config</h3>
                                <p className="text-sm text-gray-600 mb-2">‚Ä¢ ‡πÑ‡∏õ‡∏ó‡∏µ‡πà Project Settings (‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô‡πÄ‡∏ü‡∏∑‡∏≠‡∏á)</p>
                                <p className="text-sm text-gray-600 mb-2">‚Ä¢ ‡πÄ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡∏•‡∏á‡∏°‡∏≤‡∏ó‡∏µ‡πà "Your apps" ‚Üí ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å Web (</> )</p>
                                <p className="text-sm text-gray-600">‚Ä¢ ‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å firebaseConfig</p>
                            </div>

                            <div className="bg-white rounded-lg p-4">
                                <h3 className="font-bold text-gray-800 mb-2">4Ô∏è‚É£ ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÑ‡∏ü‡∏•‡πå HTML</h3>
                                <p className="text-sm text-gray-600 mb-2">‚Ä¢ ‡πÄ‡∏õ‡∏¥‡∏î‡πÑ‡∏ü‡∏•‡πå index.html ‡∏î‡πâ‡∏ß‡∏¢ Text Editor</p>
                                <p className="text-sm text-gray-600 mb-2">‚Ä¢ ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤ "YOUR_API_KEY"</p>
                                <p className="text-sm text-gray-600">‚Ä¢ ‡πÅ‡∏ó‡∏ô‡∏ó‡∏µ‡πà‡∏î‡πâ‡∏ß‡∏¢‡∏Ñ‡πà‡∏≤‡∏à‡∏£‡∏¥‡∏á‡∏à‡∏≤‡∏Å Firebase Config</p>
                            </div>
                        </div>
                    </div>

                    <div className="bg-yellow-100 border-l-4 border-yellow-500 p-4 rounded">
                        <p className="text-sm text-yellow-800">
                            <strong>üí° ‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏:</strong> ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ö‡∏ô Firebase Cloud 
                            ‡∏´‡∏•‡∏≤‡∏¢‡∏Ñ‡∏ô‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Å‡∏±‡∏ô‡πÑ‡∏î‡πâ‡πÅ‡∏ö‡∏ö Real-time!
                        </p>
                    </div>

                    <div className="mt-6 text-center">
                        <a 
                            href="https://console.firebase.google.com" 
                            target="_blank"
                            className="bg-blue-600 text-white px-8 py-3 rounded-lg font-semibold hover:bg-blue-700 transition-colors inline-block"
                        >
                            ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏™‡∏£‡πâ‡∏≤‡∏á Firebase Project
                        </a>
                    </div>
                </div>
            </div>
        );

        // Main App Component
        const VanBookingApp = () => {
            const [seats, setSeats] = useState([]);
            const [selectedSeats, setSelectedSeats] = useState([]);
            const [bookingStep, setBookingStep] = useState('select');
            const [customerInfo, setCustomerInfo] = useState({
                name: '',
                phone: '',
                date: new Date().toISOString().split('T')[0]
            });
            const [bookings, setBookings] = useState([]);
            const [isAdmin, setIsAdmin] = useState(false);
            const [loading, setLoading] = useState(true);

            // ‡πÄ‡∏ä‡πá‡∏Ñ‡∏ß‡πà‡∏≤ config Firebase ‡∏´‡∏£‡∏∑‡∏≠‡∏¢‡∏±‡∏á
            if (!isFirebaseConfigured) {
                return <FirebaseSetupNotice />;
            }

            useEffect(() => {
                initializeSeats();
                loadBookings();
            }, []);

            // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ó‡∏µ‡πà‡∏ô‡∏±‡πà‡∏á‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô
            const initializeSeats = async () => {
                const seatsRef = database.ref('seats');
                
                seatsRef.once('value', (snapshot) => {
                    if (!snapshot.exists()) {
                        const initialSeats = [
                            { id: 0, row: 1, position: 0, isBooked: false, bookedBy: null, isDriver: true },
                            { id: 1, row: 1, position: 1, isBooked: false, bookedBy: null, isDriver: false },
                            { id: 2, row: 2, position: 0, isBooked: false, bookedBy: null, isDriver: false },
                            { id: 3, row: 2, position: 1, isBooked: false, bookedBy: null, isDriver: false },
                            { id: 4, row: 3, position: 0, isBooked: false, bookedBy: null, isDriver: false },
                            { id: 5, row: 3, position: 1, isBooked: false, bookedBy: null, isDriver: false },
                            { id: 6, row: 3, position: 2, isBooked: false, bookedBy: null, isDriver: false },
                            { id: 7, row: 4, position: 0, isBooked: false, bookedBy: null, isDriver: false },
                            { id: 8, row: 4, position: 1, isBooked: false, bookedBy: null, isDriver: false },
                            { id: 9, row: 4, position: 2, isBooked: false, bookedBy: null, isDriver: false }
                        ];
                        seatsRef.set(initialSeats);
                    }
                });

                // Real-time listener
                seatsRef.on('value', (snapshot) => {
                    const data = snapshot.val();
                    if (data) {
                        setSeats(Object.values(data));
                    }
                    setLoading(false);
                });
            };

            // ‡πÇ‡∏´‡∏•‡∏î‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡πÅ‡∏ö‡∏ö Real-time
            const loadBookings = () => {
                const bookingsRef = database.ref('bookings');
                bookingsRef.on('value', (snapshot) => {
                    const data = snapshot.val();
                    if (data) {
                        const bookingsList = Object.entries(data).map(([key, value]) => ({
                            firebaseId: key,
                            ...value
                        }));
                        setBookings(bookingsList);
                    } else {
                        setBookings([]);
                    }
                });
            };

            const handleSeatClick = (seatId) => {
                if (bookingStep !== 'select') return;
                const seat = seats.find(s => s.id === seatId);
                if (seat.isBooked || seat.isDriver) return;

                if (selectedSeats.includes(seatId)) {
                    setSelectedSeats(selectedSeats.filter(id => id !== seatId));
                } else {
                    setSelectedSeats([...selectedSeats, seatId]);
                }
            };

            const handleConfirmBooking = async () => {
                if (!customerInfo.name || !customerInfo.phone) {
                    alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô');
                    return;
                }

                try {
                    // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏ó‡∏µ‡πà‡∏ô‡∏±‡πà‡∏á
                    const seatsRef = database.ref('seats');
                    const updatedSeats = seats.map(seat => {
                        if (selectedSeats.includes(seat.id)) {
                            return { ...seat, isBooked: true, bookedBy: customerInfo.name };
                        }
                        return seat;
                    });
                    await seatsRef.set(updatedSeats);

                    // ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á
                    const bookingsRef = database.ref('bookings');
                    const newBooking = {
                        id: Date.now(),
                        seats: selectedSeats,
                        customer: customerInfo,
                        bookingDate: new Date().toISOString(),
                        tripDate: customerInfo.date
                    };
                    await bookingsRef.push(newBooking);

                    setBookingStep('success');
                } catch (error) {
                    console.error('Error saving booking:', error);
                    alert('‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á');
                }
            };

            const handleNewBooking = () => {
                setSelectedSeats([]);
                setCustomerInfo({
                    name: '',
                    phone: '',
                    date: new Date().toISOString().split('T')[0]
                });
                setBookingStep('select');
            };

            const handleCancelBooking = async (booking) => {
                if (!confirm('‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡∏ô‡∏µ‡πâ?')) return;

                try {
                    // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏ó‡∏µ‡πà‡∏ô‡∏±‡πà‡∏á
                    const seatsRef = database.ref('seats');
                    const updatedSeats = seats.map(seat => {
                        if (booking.seats.includes(seat.id)) {
                            return { ...seat, isBooked: false, bookedBy: null };
                        }
                        return seat;
                    });
                    await seatsRef.set(updatedSeats);

                    // ‡∏•‡∏ö‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á
                    const bookingRef = database.ref(`bookings/${booking.firebaseId}`);
                    await bookingRef.remove();

                    alert('‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß');
                } catch (error) {
                    console.error('Error canceling booking:', error);
                    alert('‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á');
                }
            };

            const getSeatColor = (seat) => {
                if (seat.isDriver) return 'bg-gray-800 cursor-not-allowed';
                if (seat.isBooked) return 'bg-red-500 cursor-not-allowed';
                if (selectedSeats.includes(seat.id)) return 'bg-green-500';
                return 'bg-blue-500 hover:bg-blue-600 cursor-pointer';
            };

            const renderSeats = () => {
                const rows = [];
                
                for (let rowNum = 1; rowNum <= 4; rowNum++) {
                    const rowSeats = seats.filter(s => s.row === rowNum);
                    rows.push(
                        <div key={rowNum} className="flex justify-center gap-4 mb-3">
                            {rowSeats.map(seat => (
                                <div
                                    key={seat.id}
                                    onClick={() => handleSeatClick(seat.id)}
                                    className={`w-16 h-16 rounded-lg flex items-center justify-center text-white font-bold transition-all transform hover:scale-105 ${getSeatColor(seat)}`}
                                    title={seat.isBooked ? `‡∏à‡∏≠‡∏á‡πÇ‡∏î‡∏¢: ${seat.bookedBy}` : ''}
                                >
                                    {seat.isDriver ? 'üöó' : seat.id}
                                </div>
                            ))}
                        </div>
                    );
                }
                return rows;
            };

            // Admin Dashboard
            if (isAdmin) {
                const bookedSeats = seats.filter(s => s.isBooked && !s.isDriver).length;
                const availableSeats = seats.filter(s => !s.isBooked && !s.isDriver).length;

                return (
                    <div className="min-h-screen p-4">
                        <div className="max-w-7xl mx-auto">
                            {/* Header */}
                            <div className="bg-white rounded-2xl shadow-xl p-6 mb-6">
                                <div className="flex justify-between items-center">
                                    <div>
                                        <h1 className="text-3xl font-bold text-gray-800">
                                            üéõÔ∏è Admin Dashboard
                                        </h1>
                                        <p className="text-gray-600">‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡∏£‡∏ñ‡∏ï‡∏π‡πâ</p>
                                    </div>
                                    <button
                                        onClick={() => setIsAdmin(false)}
                                        className="bg-blue-500 text-white px-6 py-2 rounded-lg hover:bg-blue-600"
                                    >
                                        ‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠‡∏á
                                    </button>
                                </div>
                            </div>

                            {/* Stats */}
                            <div className="grid grid-cols-1 md:grid-cols-3 gap-6 mb-6">
                                <div className="bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl shadow-xl p-6 text-white">
                                    <div className="flex items-center justify-between">
                                        <div>
                                            <p className="text-blue-100 mb-1">‡∏ó‡∏µ‡πà‡∏ô‡∏±‡πà‡∏á‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</p>
                                            <p className="text-4xl font-bold">10</p>
                                        </div>
                                        <ChartIcon />
                                    </div>
                                </div>

                                <div className="bg-gradient-to-br from-green-500 to-green-600 rounded-2xl shadow-xl p-6 text-white">
                                    <div className="flex items-center justify-between">
                                        <div>
                                            <p className="text-green-100 mb-1">‡∏à‡∏≠‡∏á‡πÅ‡∏•‡πâ‡∏ß</p>
                                            <p className="text-4xl font-bold">{bookedSeats}</p>
                                        </div>
                                        <CheckIcon />
                                    </div>
                                </div>

                                <div className="bg-gradient-to-br from-orange-500 to-orange-600 rounded-2xl shadow-xl p-6 text-white">
                                    <div className="flex items-center justify-between">
                                        <div>
                                            <p className="text-orange-100 mb-1">‡∏ó‡∏µ‡πà‡∏ô‡∏±‡πà‡∏á‡∏ß‡πà‡∏≤‡∏á</p>
                                            <p className="text-4xl font-bold">{availableSeats}</p>
                                        </div>
                                        <div className="text-4xl">üí∫</div>
                                    </div>
                                </div>
                            </div>

                            {/* Bookings List */}
                            <div className="bg-white rounded-2xl shadow-xl p-6">
                                <h2 className="text-2xl font-bold text-gray-800 mb-6">
                                    üìã ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î ({bookings.length})
                                </h2>
                                
                                {bookings.length === 0 ? (
                                    <div className="text-center py-12 text-gray-500">
                                        <p className="text-xl">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á</p>
                                    </div>
                                ) : (
                                    <div className="overflow-x-auto">
                                        <table className="w-full">
                                            <thead>
                                                <tr className="border-b-2 border-gray-200">
                                                    <th className="text-left p-4 font-bold text-gray-700">‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•</th>
                                                    <th className="text-left p-4 font-bold text-gray-700">‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£</th>
                                                    <th className="text-left p-4 font-bold text-gray-700">‡∏ó‡∏µ‡πà‡∏ô‡∏±‡πà‡∏á</th>
                                                    <th className="text-left p-4 font-bold text-gray-700">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏î‡∏¥‡∏ô‡∏ó‡∏≤‡∏á</th>
                                                    <th className="text-left p-4 font-bold text-gray-700">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏à‡∏≠‡∏á</th>
                                                    <th className="text-center p-4 font-bold text-gray-700">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                {bookings.slice().reverse().map((booking, index) => (
                                                    <tr key={index} className="border-b border-gray-100 hover:bg-gray-50">
                                                        <td className="p-4">
                                                            <div className="flex items-center gap-2">
                                                                <UserIcon />
                                                                <span className="font-semibold">{booking.customer.name}</span>
                                                            </div>
                                                        </td>
                                                        <td className="p-4">
                                                            <div className="flex items-center gap-2">
                                                                <PhoneIcon />
                                                                <span>{booking.customer.phone}</span>
                                                            </div>
                                                        </td>
                                                        <td className="p-4">
                                                            <span className="bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm font-semibold">
                                                                {booking.seats.sort((a, b) => a - b).join(', ')}
                                                            </span>
                                                        </td>
                                                        <td className="p-4">
                                                            <div className="flex items-center gap-2">
                                                                <CalendarIcon />
                                                                <span>{new Date(booking.tripDate).toLocaleDateString('th-TH')}</span>
                                                            </div>
                                                        </td>
                                                        <td className="p-4 text-sm text-gray-600">
                                                            {new Date(booking.bookingDate).toLocaleDateString('th-TH')} {new Date(booking.bookingDate).toLocaleTimeString('th-TH')}
                                                        </td>
                                                        <td className="p-4 text-center">
                                                            <button
                                                                onClick={() => handleCancelBooking(booking)}
                                                                className="bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition-colors text-sm font-semibold"
                                                            >
                                                                ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å
                                                            </button>
                                                        </td>
                                                    </tr>
                                                ))}
                                            </tbody>
                                        </table>
                                    </div>
                                )}
                            </div>
                        </div>
                    </div>
                );
            }

            // Success Screen
            if (bookingStep === 'success') {
                return (
                    <div className="min-h-screen bg-gradient-to-br from-green-50 to-blue-50 p-4">
                        <div className="max-w-2xl mx-auto">
                